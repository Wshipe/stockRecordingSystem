{% extends "stockweb/dashboard.html" %}

{% block content %}
<div class="container mt-4">
    <h1>Watch List: {{ watchlist.name }}</h1>
    <ul class="list-group">
        {% for item in watchlist.stocks.all %}
        <li class="list-group-item">
            <strong>{{ item.stock.company_name }} ({{ item.stock.ticker }})</strong><br>
            Price: ${{ item.stock.current_price }}<br>
            Gain/Loss: {{ item.stock.gain_loss_percentage }}%<br>
            <form method="POST" action="{% url 'delete_stock_from_watchlist' item.stock.id watchlist.id %}">
                {% csrf_token %}
                <button type="submit" class="btn btn-danger btn-sm">Remove Stock</button>
            </form>
        </li>
        {% empty %}
        <li class="list-group-item">No stocks in this watchlist yet. <a href="{% url 'search' %}">Add Stocks</a></li>
        {% endfor %}
    </ul>
    <form method="POST" action="{% url 'delete_watchlist' watchlist.id %}" style="margin-top: 20px;">
        {% csrf_token %}
        <button type="submit" class="btn btn-danger">Delete Watch List</button>
    </form>
</div>
{% endblock %}
